---
slug: bb-blog-2
title: Docusaurus éƒ¨ç½² GitHub Pagesï¼ˆäºŒï¼‰
authors: [bb]
tags: [docusaurus, GitHub Pages]
---

## ç¬¬ä¸€æ­¥ï¼šåœ¨ä»£ç ä»“åº“ä¸­æ–°å»ºæ–‡ä»¶å¤¹ ğŸ—‚ï¸

1. åœ¨æ ¹ç›®å½•åˆ›å»ºåä¸º `.github` çš„æ–‡ä»¶å¤¹ ğŸ–¥ï¸ã€‚
2. åœ¨ `.github` æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `workflows` çš„å­æ–‡ä»¶å¤¹ ğŸ§‘â€ğŸ’»ã€‚
3. åœ¨ `workflows` æ–‡ä»¶å¤¹ä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `deploy.yml` çš„æ–‡ä»¶ï¼Œæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š

![æˆ‘çš„å›¾ç‰‡](/img/githubfile.png)

```yaml
name: Deploy to GitHub Pages

on:
  push:
    branches:
      - main

jobs:
  build:
    name: Build Docusaurus
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
        with:
          fetch-depth: 0
      - uses: actions/setup-node@v4
        with:
          node-version: 18
          cache: yarn

      - name: Install dependencies
        run: yarn install --frozen-lockfile
      - name: Build website
        run: yarn build

      - name: Upload Build Artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: build

  deploy:
    name: Deploy to GitHub Pages
    needs: build

    # æˆäºˆ GITHUB_TOKEN æ‰€éœ€çš„æƒé™ä»¥è¿›è¡Œ Pages éƒ¨ç½²
    permissions:
      pages: write # è¿›è¡Œ Pages éƒ¨ç½²
      id-token: write # éªŒè¯éƒ¨ç½²æ˜¯å¦æ¥æºäºé€‚å½“çš„æº

    # éƒ¨ç½²åˆ° GitHub Pages ç¯å¢ƒ
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    runs-on: ubuntu-latest
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4
```

---

## ç¬¬äºŒæ­¥ï¼šé…ç½® GitHub ä»“åº“ âš™ï¸

1. æ‰“å¼€ GitHub ä»“åº“çš„è®¾ç½® âš™ï¸ã€‚
2. åœ¨å·¦ä¾§èœå•ä¸­æ‰¾åˆ° `Environment` é€‰é¡¹ ğŸ“„ã€‚
3. åœ¨ `Deployment branches and tags` éƒ¨åˆ†é€‰æ‹© `Selected branches and tags` åˆ†æ”¯ ğŸŒ¿ã€‚

ä¹‹åä¿å­˜æ–‡ä»¶å¹¶æäº¤åˆ° GitHub ä»“åº“ä¸­ã€‚

- git add .
- git commit -m "add deploy.yml"
- git push origin main

---

## ç¬¬ä¸‰æ­¥ï¼šæ¨é€ä»£ç åˆ° main åˆ†æ”¯ ğŸ‰

1. æ¨é€ä»£ç åˆ° `main` åˆ†æ”¯åï¼ŒGitHub Pages ä¼šè‡ªåŠ¨è§¦å‘å·¥ä½œæµ ğŸƒâ€â™€ï¸ã€‚
2. ä½ å¯ä»¥åœ¨ `Actions` é€‰é¡¹å¡ä¸­æŸ¥çœ‹å·¥ä½œæµçš„è¿è¡ŒçŠ¶æ€ ğŸ“Šã€‚
3. å¦‚æœå·¥ä½œæµæˆåŠŸè¿è¡Œï¼Œä½ çš„ Docusaurus åšå®¢å°†è‡ªåŠ¨éƒ¨ç½²åˆ° GitHub Pages ä¸Š ğŸŒã€‚
4. ä½ å¯ä»¥åœ¨ `Pages` é€‰é¡¹å¡ä¸­æŸ¥çœ‹ä½ çš„åšå®¢åœ°å€ ğŸ”—ã€‚

---

### åœ¨é¡¹ç›®ä¸­å‡ ä¸ªåˆ†æ”¯çš„åŒºåˆ« ğŸ”„

- **é¡¹ç›®ä¸­çš„ `deploymentBranch`**ï¼šé€šå¸¸æ˜¯æŒ‡åœ¨ä»£ç ä¸­è®¾ç½®çš„ç›®æ ‡åˆ†æ”¯ï¼Œåœ¨è¿™ä¸ªåˆ†æ”¯ä¸Šå­˜æ”¾çš„æ˜¯æ„å»ºå¥½çš„ã€å¯ä¾›æµè§ˆå™¨è®¿é—®çš„é™æ€æ–‡ä»¶ã€‚é€šå¸¸é…ç½®ä¸º `gh-pages` ğŸ“‚ã€‚
- **YML æ–‡ä»¶ä¸­çš„ `branch`**ï¼šé€šå¸¸æ˜¯æŒ‡åœ¨ GitHub Actions å·¥ä½œæµä¸­è®¾ç½®çš„è§¦å‘åˆ†æ”¯ï¼Œå½“è¿™ä¸ªåˆ†æ”¯æœ‰æ–°çš„æäº¤æ—¶ï¼Œå·¥ä½œæµä¼šè¢«è§¦å‘ã€‚é€šå¸¸é…ç½®ä¸º `main` ğŸ¯ã€‚
- **GitHub Pages è®¾ç½®ä¸­çš„åˆ†æ”¯**ï¼šé€šå¸¸æ˜¯æŒ‡åœ¨ GitHub Pages è®¾ç½®ä¸­é€‰æ‹©çš„æºåˆ†æ”¯ï¼Œè¿™ä¸ªåˆ†æ”¯ä¸Šçš„æ–‡ä»¶ä¼šè¢«ç”¨æ¥ç”Ÿæˆå’Œæ‰˜ç®¡ä½ çš„ GitHub Pages ç½‘ç«™ ğŸŒã€‚é€šå¸¸é…ç½®ä¸º `gh-pages` ğŸŒ±ã€‚
